type Msg {
  message: String
  mine: Boolean
  time: AWSDateTime
}

type Contact @model @auth(rules: [{allow: public}]) {
  id: ID!
  userID: ID! @index(name: "byUser")
  messages: [Message] @hasMany(indexName: "byContact", fields: ["id"])
  contactUserID: ID
}

type Message @model @auth(rules: [{allow: public}]) {
  id: ID!
  time: AWSDateTime!
  contactID: ID! @index(name: "byContact")
  messages: [Msg]
}

type User @model @auth(rules: [{allow: public}, {allow: private}]) {
  id: ID!
  username: String!
  email: AWSEmail!
  dp: String
  contacts: [Contact] @hasMany(indexName: "byUser", fields: ["id"])
}
 